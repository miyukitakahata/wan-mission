# 性能要件の定義と測定

## 1. 性能要件の定義

- レスポンスタイム：

  - 一覧取得 API（GET）：2 秒以内
  - 登録 API（POST）：3 秒以内

- スループット：
  - 1 秒あたり **10 リクエスト** 以上の処理に対応（10 req/sec）

### スループット目標の理由

- 本アプリは個人または小規模チームでの利用を想定しており、アクセス集中の頻度は限定的である。
- そのため、**1 秒あたり 10 リクエスト**を安定して処理できれば、通常利用において十分な性能を発揮できると判断。
- 今後アクセス数が増加した場合も、バックエンドのスケールアップやキャッシュ導入などにより段階的に対応可能。

## 2. 測定ツール・コマンド

- 使用ツール：Apache Benchmark (`ab`)
- コマンド例：

```bash
ab -n 100 -c 10 http://localhost:8000/api/users/me
```

## 3. 性能測定結果（Apache Benchmark）

### 3.1 POST /api/users の性能測定結果

- 実行コマンド：`ab -n 100 -c 10 -p backend/tests/benchmark/user.json -T application/json http://localhost:8000/api/users
`
- 結果：
  - Requests per second: 47.48
  - Time per request: 210.616ms
  - Non-2xx responses: 100（409 Conflict：同一ユーザーの重複登録によるエラー）
- 評価：
  - `/api/users` は新規ユーザー登録用の POST エンドポイントであり、同一データの重複送信時は `409 Conflict` を返す仕様。
  - 今回のベンチマークでは同一データを 100 回送信しているため、全件が `409` となっているが、これは**正常なアプリ動作**。
  - 実行時間やスループットから見ても、**平均 210ms、47.48 req/sec**と非常に高速で、**性能要件（10 req/sec, 3 秒以内）を大幅に上回っている**。
  - よって、**処理能力は良好であり、安定した運用が可能と評価できる。**

### 3.2 GET メソッドの測定に関して

現時点では Firebase 認証が必要なエンドポイントの測定は環境の都合で保留していますが、再現性あるトークン管理環境が整い次第、順次追加する想定です。
測定可能な POST エンドポイントでは目標を大幅に上回るスループットが確認でき、現状の性能要件は十分に満たしています。
